# 1.4 패킷 교환 네트워크에서의 지연, 손실과 처리율

인터넷은 종단 시스템에서 수행되는 분산 애플리케이션에게 서비스를 제공하는 인프라스트럭처

데이터 손실 없이 많은 양의 데이터를 이동시킬 수는 없다.

대신에 반드시 두 종단 시스템 간에 처리율(전달될 수 있는 초당 데이터의 양)을 제한하여 종단 시스템 간에 지연을 야기하며 실제로 패킷을 잃어버리기도 한다.
한편, 현실의 물리 법칙이 처리율의 제한뿐만 아니라 지연과 손실을 야기하는 것은 불행한 일이다.

이런 문제들을 해결하기 위해 컴퓨터 네트워크에서의 지연,손실,처리율을 배움


## 1.4.1 패킷 교환 네트워크에서의 지연 개요

- 중요한 지연
  - 노드 처리 지연(nodal processing delay)
  - 큐잉 지연 (queing delay)
  - 전송 지연 (transmission delay)
  - 전파 지연 (propagation delay)
  - 이러한 지연들이 쌓여서 `전체 노드 지연 (total nodal delay)`를 일으킨다
 
### 지연 유형


![image](https://github.com/user-attachments/assets/c3e7c77d-56a2-400f-8b93-625543a5a15e)

- 라우터 a에서 b로 가는 링크 앞에 큐와 버퍼가 있음
- 패킷이 업스트림노드로부터 라우터 A에 도착하면 라우터 A는 그 패킷에 대한 적당한 출력 링크를 결정하기 위해 패킷 헤더를 조사하고 선택된 링크로 그 패킷을 보낸다.

</br>
</br>

### 처리 지연

- 패킷 헤더를 조사하고 어디로 보낼 지 결정하는 시간
- 업스트림 노드에서 라우터 a로 패킷의 비트를 전송하면서 발생하는 패킷의 비트 레벨 오류를 조사하는 데 필요한 시간과 같은 요소를 포함
- 노드 처리 후 큐로 보냄
- 고속 라우터에서 일반적으로 수 마이크로초


### 큐잉 지연

- 큐에서 링크로 전송되기를 기다림
- 큐에 앞서 도착한 패킷의 수에 의해 큐잉 지연 길이 결정
- 큐가 비어있고 다른 패킷이 전송중이지 않다면 큐잉 지연은 0
- 이미 도착한 패킷의 수는 큐에 도착하는 트래픽의 강도와 특성에 대한 함수

### 전송 transmission 지연

- 앞에 도착한 모든 패킷이 전송되기까지 걸리는 시간
-  `전송지연 dtrans = 패킷의길이L/링크전송률R`
-  10Mbps 이더넷 링크의 전송률은 10Mbps

### 전파 propagation 지연

- 링크의 처음부터 라우터 B까지의 전파에 필요한 시간
- 비트는 링크의 전파 속도로 전파된다.
- 전파 속도는 링크의 물리매체에 따라 다르고 빛의 속도와 같거나 약간 작다
- `전파지연 dprop = 라우터 사이의 거리 (d) /링크의 전파 속도(s)`


### 전송 지연과 전파 지연 비교

- 전송 지연
  - 패킷이 라우터에 대기하는 시간 (패킷을 내보내는 데 필요한 시간)
  - 라우터 사이의 거리와 관계없음
- 전파 지연
  - 한 라우터에서 다른 라우터로 가는(전파되는) 시간
  - 패킷 길이나 링크 전송률과는 관계없음

<img src="https://github.com/user-attachments/assets/e2555899-cd1f-4c1b-91d3-8dfb99afcdb5" width="500"/>

![image](https://github.com/user-attachments/assets/a77ffb50-3f16-41d0-b8fc-2966b1da6d61)

전체 노드 지연 = 처리+큐잉+전송+전파
![image](https://github.com/user-attachments/assets/d9138624-0786-48bb-839d-3d98d92553f0)


